<!DOCTYPE html>
<html>

<head>
  <title>Labor</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta charset="utf-8">
  <style>
      html, body {
         height: 100%;
         margin: 0;
         padding: 0;
      }

      #column {
         width: 20%;
         height: 100%;
      }
      
      #map {
         height: 100%;
         width: 80%;
         background-color: grey;
         float: right;
      }

      input {
         padding-top: 40vh;
         box-sizing: border-box; 
         width: 20%;
         float: left;
         outline: solid black 4px;
      }

  </style>
  
</head>

<body>
   
   <input type = "text" name ="Full Name" placeholder="enter zip">
   <div id="map"></div>
   
   
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
   <script>
      async function initMap() {
         // Create the map.
         map = new google.maps.Map(document.getElementById('map'), {
            zoom: 8,
            center: {lat: 42.360, lng: -71.0589},
         });

         const apiKey = 'AIzaSyBC9qoUkWr5lhVeqb8agYWE7Gx5zxTT66c';
         const infoWindow = new google.maps.InfoWindow();

         bounds = new google.maps.LatLngBounds();

         // Try HTML5 geolocation
         if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(position => {
               pos = {
               lat: position.coords.latitude,
               lng: position.coords.longitude
               };
               map.setCenter(pos);
               map.setZoom(10);
               bounds.extend(pos);

               infoWindow.setPosition(pos);
               infoWindow.setContent('Location found.');
               infoWindow.open(map);
               map.setCenter(pos);

            }, () => {
               // add window that points to zip entry
            });
         // Load the stores GeoJSON onto the map.
         }



         const response = await fetch('https://jcurrrrr.github.io/stores.json');
         var json = require('https://jcurrrrr.github.io/stores.json');
         console.log(json);
         //map.data.loadGeoJson('https://jcurrrrr.github.io/stores.json')

         $.each(json.features, function(key, data){
            alert(data);
         });
         
         
         // Show the information for a store when its marker is clicked.
         map.data.addListener('click', (event) => {
            const category = event.feature.getProperty('category');
            const name = event.feature.getProperty('name');
            const description = event.feature.getProperty('description');
            const hours = event.feature.getProperty('hours');
            const phone = event.feature.getProperty('phone');
            const position = event.feature.getGeometry().get();
            const content = `
               <h2>${name}</h2><p>${description}</p>
               <p><b>Open:</b> ${hours}<br/><b>Phone:</b> ${phone}</p>
            `;

            infoWindow.setContent(content);
            infoWindow.setPosition(position);
            infoWindow.setOptions({pixelOffset: new google.maps.Size(0, -30)});
            infoWindow.open(map);
         });
      }
   </script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBC9qoUkWr5lhVeqb8agYWE7Gx5zxTT66c&libraries=places&callback=initMap">
</script>
</body>

</html>